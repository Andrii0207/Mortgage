{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-760be6f9e416ef0a.js","node_modules/@parcel/runtime-js/lib/runtime-094d1b7e61d55c79.js","src/js/task.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"j1GSm\\\":\\\"index.f9b28bd8.js\\\",\\\"6RkRa\\\":\\\"symbol-defs.6cc250a4.svg\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6RkRa\")).toString();","import { save, load } from './localstorage.js';\nconst banksList = document.querySelector('.banks');\nconst banksInformationEl = document.querySelector('.bank-information');\nconst backdropRef = document.querySelector('[data-modal]');\nconst createNewBankBtnRef = document.querySelector('.create_new_bank');\nconst modalCloseBtnRef = document.querySelector('[data-modal-close]');\nconst overlay = document.querySelector('.overlay');\nconst startBtn = document.querySelector('.start');\nconst modalBtnCreateBank = document.querySelector(\n  '.create_new_bank-from-modal'\n);\nconst contactForm = document.querySelector('.contact-form');\nconst onBtnBankList = document.querySelectorAll('.banks__remove--button');\nconst LOCALSTORAGE_KEY = 'bank-list';\n\nlet isEdit = false;\n\nimport sprite from '../img/symbol-defs.svg';\nconsole.log(sprite);\n\nlet banks = [\n  // {\n  //   id: 1,\n  //   name: 'Mono',\n  //   interestRate: 5,\n  //   maxLoan: 500000,\n  //   minPayment: 1000,\n  //   loanTerm: 12,\n  // },\n  // {\n  //   id: 2,\n  //   name: 'Privat',\n  //   interestRate: 7,\n  //   maxLoan: 1000000,\n  //   minPayment: 5000,\n  //   loanTerm: 50,\n  // },\n];\n\n// console.log(save(LOCALSTORAGE_KEY, JSON.stringify(banks)));\nfunction createMarkupBank({ name, id }) {\n  return `<li class=\"banks__item\" data-id='${id}'>\n  <p>${name}</p>\n  <div class=\"btn-wrapper\" >\n  <button class=\"banks__edit--button banks-btn\" name=\"edit-bank\" type=\"button\">\n              <svg width=\"20\" height=\"20\">\n              <use href=\"${sprite}#icon-pencil\"></use>\n              </svg>\n  </button>\n   <button  name=\"delete-bank\" class=\"banks__remove--button banks-btn\" type=\"button\">\n              <svg width=\"20\" height=\"20\">\n              <use href=\"${sprite}#icon-x\"></use>\n              </svg>\n      </button>\n      </div>\n      </li>`;\n}\nfunction createBankList(banks, callback) {\n  return banks.map(bank => callback(bank)).join('');\n}\n\nfunction createMarkupBankInformation({\n  name,\n  interestRate,\n  maxLoan,\n  minPayment,\n  loanTerm,\n}) {\n  return `<li class=\"bank-keys\">Bank: <span class=\"bank_description\">${name}</span></li>\n      <li class=\"bank-keys\">Mortgage Size, $: <span class=\"bank_description\">${maxLoan}</span></li>\n      <li class=\"bank-keys\">Minimum down payment, $: <span class=\"bank_description\">${minPayment}</span></li>\n      <li class=\"bank-keys\">Loan period, month: <span class=\"bank_description\">${loanTerm}</span></li>\n      <li class=\"bank-keys\">Interest rate, %: <span class=\"bank_description\">${interestRate}</span></li>`;\n}\n\nlet currentBank;\n\nbanksList.addEventListener('click', event => {\n  const bankId = event.target.closest('.banks__item').dataset.id;\n  currentBank = findBankById(bankId);\n  if (event.target.nodeName === 'OL') {\n    return;\n  }\n\n  if (event.target.closest('.banks__edit--button')) {\n    isEdit = true;\n    onModalCreateNewBank();\n    console.dir(contactForm.elements);\n\n    Object.keys(currentBank).filter(key => key !== 'id').forEach(key => contactForm.elements[key].value = currentBank[key]);\n  \n  }\n  console.log(currentBank);\n  banksInformationEl.innerHTML = createMarkupBankInformation(currentBank);\n});\n\nfunction findBankById(id) {\n\n    return banks.find(bank => {\n    return Number(id) === bank.id;\n    });\n  \n}\ncreateBankListFromLocal();\n\nfunction checkBankList() {\n  if (banks.length) {\n    overlay.classList.add('hide');\n    banksList.innerHTML = '';\n    banksList.insertAdjacentHTML(\n      'beforeend',\n      createBankList(banks, createMarkupBank)\n    );\n  }\n}\n\ncreateNewBankBtnRef.addEventListener('click', onModalCreateNewBank);\nmodalBtnCreateBank.addEventListener('click', onModalCreateNewBank);\n\nfunction onModalCreateNewBank() {\n  overlay.classList.add('hide');\n  backdropRef.classList.remove('is-hidden');\n}\n\nmodalCloseBtnRef.addEventListener('click', onModalCloseBtn);\n\nfunction onModalCloseBtn() {\n  backdropRef.classList.add('is-hidden');\n}\n\nbackdropRef.addEventListener('click', onBackdropClick);\n\nfunction onBackdropClick(event) {\n  if (event.target === event.currentTarget) {\n    onModalCloseBtn();\n  }\n}\n\ndocument.addEventListener('keydown', onPushEsc);\n\nfunction onPushEsc(event) {\n  if (event.code === 'Escape') {\n    onModalCloseBtn();\n  }\n}\n\ncontactForm.addEventListener('submit', onAddNewBank);\n\nfunction onAddNewBank(event) {\n  event.preventDefault();\n  const newBank = {};\n\n  const formData = new FormData(event.target);\n\n  formData.forEach((value, name) => (newBank[name] = value));\n  newBank.id = Date.now();\n\n  if (isEdit) {\n    banks = banks.map(el => el.id === currentBank.id ? newBank : el);\n  } else banks.push(newBank);\n\n  event.target.reset();\n  onModalCloseBtn();\n  checkBankList();\n  onSetLocalStorage();\n}\n\nfunction onSetLocalStorage() {\n  localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(banks));\n}\n\nfunction createBankListFromLocal() {\n  let savedData = localStorage.getItem(LOCALSTORAGE_KEY);\n\n  if (savedData) {\n    banks = JSON.parse(savedData);\n    checkBankList();\n  } else checkBankList();\n}\n\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$b5fb211c30c34712$exports","URL","resolve","import","meta","url","toString","$092455eada913ff4$var$banksList","document","querySelector","$092455eada913ff4$var$banksInformationEl","$092455eada913ff4$var$backdropRef","$092455eada913ff4$var$createNewBankBtnRef","$092455eada913ff4$var$modalCloseBtnRef","$092455eada913ff4$var$overlay","$092455eada913ff4$var$modalBtnCreateBank","$092455eada913ff4$var$contactForm","querySelectorAll","$092455eada913ff4$var$isEdit","console","log","$parcel$interopDefault","$092455eada913ff4$var$currentBank","$092455eada913ff4$var$banks","$092455eada913ff4$var$createMarkupBank","name","$092455eada913ff4$var$checkBankList","callback","classList","add","innerHTML","insertAdjacentHTML","map","bank","join","$092455eada913ff4$var$onModalCreateNewBank","remove","$092455eada913ff4$var$onModalCloseBtn","addEventListener","event","bankId","target","closest","dataset","find","Number","nodeName","dir","elements","filter","key","forEach","value","interestRate","maxLoan","minPayment","loanTerm","$092455eada913ff4$var$createMarkupBankInformation","savedData","localStorage","getItem","$092455eada913ff4$var$createBankListFromLocal","currentTarget","code","preventDefault","newBank","FormData","Date","now","el","push","reset","setItem","stringify"],"version":3,"file":"index.f9b28bd8.js.map"}